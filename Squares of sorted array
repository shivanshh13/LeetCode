#include <vector>
#include <algorithm>
#include <cmath>

class Solution {
public:
    std::vector<int> sortedSquares(std::vector<int>& nums) {
        // n is the length of the input array.
        int n = nums.size();
        
        // 1. Initialize the result array of the same size.
        // We'll fill this array from the end (n-1) backwards to 0.
        std::vector<int> result(n);
        
        // 2. Initialize two pointers:
        // 'left' starts at the beginning (index 0).
        int left = 0;
        // 'right' starts at the end (index n-1).
        int right = n - 1;
        
        // 3. Loop from the end of the result array backwards (i.e., from the largest to the smallest element).
        // 'i' represents the index in the result array where we place the next largest square.
        for (int i = n - 1; i >= 0; --i) {
            // Calculate the squares of the elements pointed to by left and right.
            int leftSquare = nums[left] * nums[left];
            int rightSquare = nums[right] * nums[right];
            
            // 4. Compare the two squares.
            if (leftSquare > rightSquare) {
                // The square of the left element is larger.
                // Place it at the current end of the result array (index i).
                result[i] = leftSquare;
                
                // Move the left pointer one step inward.
                left++;
            } else {
                // The square of the right element is larger or equal.
                // Place it at the current end of the result array (index i).
                result[i] = rightSquare;
                
                // Move the right pointer one step inward.
                right--;
            }
        }
        
        // 5. The result array is now filled in non-decreasing order.
        return result;
    }
};
